<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/vocab_style.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/swiper.min.css">
    <link rel="stylesheet" href="css/animate.min.css">
    <link rel="shortcut icon" href="img/favs/favicon5.png" type="image/png">
    <title>Peter's Club</title>
</head>
<body class="purpleb2">
    <div class="loading-container mainload purplegb">
        <p class="loading-txt">
            <img class="amoment" src="img/loading.svg" alt="">
        </p>
    </div>
    <header class="vocabhead">
        <div class="logocont">
            <img class="logoim" src="img/petersworld.png" alt="">
            <p>Peter's Club</p>
        </div>
    </header>
    <div class="swiper-container advanced">
        <div class="swiper-wrapper economy">
            <!-- Slides will go here. Replace with static HTML or JS if needed. -->
        </div>
    </div>
    <script src="js/jquery-1.8.3.min.js"></script>
    <script src="js/swiper.min.js"></script>
    <script src="js/redir.js"></script>
    <script>
        var slideCount = 6;
        var wrapper = document.querySelector('.swiper-wrapper');
        var isSmallScreen = window.innerWidth < 1000;
        for (let i = 1; i <= slideCount; i++) {
            let slide = document.createElement('div');
            slide.id = 'c' + i;
            slide.className = 'swiper-slide';
            let imgPath = `imgs/oth/${isSmallScreen ? 'ss' : 'bs'}/oth (${i}).jpg`;
            slide.innerHTML = `
                <img src="${imgPath}" class="slideimg" loading="lazy" style="width:100%;height:100%;object-fit:contain;" />
                <div class='gomenu'></div>
                <div class='assisttext'><div class='budge'>Worksheets</div><div class='line'><h2>Other</h2> <span class='pron'>Page: ${i}</span><div class='plays' id='download${i}'><img class='play___holder' src='img/download.svg' alt=''><object class='playing' type='image/svg+xml' data='img/download.svg'></object></div></div><button class='nextbutton nextel'></button></div>
            `;
            wrapper.appendChild(slide);
        }

        var swiper = new Swiper('.swiper-container', {
            init: false,
            navigation: {
                nextEl: '.nextel',
            },
            lazy: {
                loadPrevNext: true,
                loadPrevNextAmount: 2,
                loadOnTransitionStart: true
            },
            // pagination removed
        });
        // Loader timing logic
        let loaderStart = Date.now();
        const minLoaderTime = 1300; // ms
        swiper.on('init', function () {
            const loader = document.querySelector('.loading-container');
            const elapsed = Date.now() - loaderStart;
            const hideLoader = () => {
                loader.style.transition = 'opacity 0.3s';
                loader.style.opacity = 0;
                setTimeout(() => { loader.style.display = 'none'; }, 300);
            };
            if (elapsed < minLoaderTime) {
                setTimeout(hideLoader, minLoaderTime - elapsed);
            } else {
                hideLoader();
            }
            setTimeout(() => {
                document.querySelector('header').classList.add('animate__animated', 'animate__fadeInDown');
                document.querySelectorAll('.assisttext').forEach(e => e.classList.add('animate__animated', 'animate__fadeInUp'));
                document.querySelectorAll('.gomenu').forEach(e => e.classList.add('animate__animated', 'animate__fadeIn'));
            }, 1200);
        });
        swiper.init();
        swiper.on('touchStart', function () {
            document.querySelector('header').classList.remove('animate__animated', 'animate__fadeInDown');
            document.querySelectorAll('.assisttext').forEach(e => e.classList.remove('animate__animated', 'animate__fadeInUp'));
            document.querySelectorAll('.gomenu').forEach(e => e.classList.remove('animate__animated', 'animate__fadeIn'));
        });
        swiper.on('slideChange', function () {
            document.querySelector('header').classList.add('animate__animated', 'animate__fadeInDown');
            document.querySelectorAll('.assisttext').forEach(e => e.classList.add('animate__animated', 'animate__fadeInUp'));
            document.querySelectorAll('.gomenu').forEach(e => e.classList.add('animate__animated', 'animate__fadeIn'));
        });
        document.addEventListener('DOMContentLoaded', function() {
            for (let i = 1; i <= slideCount; i++) {
                let btn = document.getElementById('download' + i);
                if (btn) {
                    btn.addEventListener('click', function () {
                        const imageUrl = `imgs/oth/ss/oth (${i}).jpg`;
                        const fileName = `${i}.jpg`;
                        const link = document.createElement('a');
                        link.href = imageUrl;
                        link.download = fileName;
                        document.body.appendChild(link);
                        link.click();
                        document.body.removeChild(link);
                    });
                }
            }
        });
    </script>
    <script src="js/removeanimate.js"></script>
</body>
</html>
